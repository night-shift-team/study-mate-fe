
# Get staged files
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM)

# Filter only files supported by Prettier
FORMATTABLE_FILES=$(echo "$STAGED_FILES" | grep -E '\.(js|jsx|ts|tsx|json|css|scss|md|html|yml|yaml)$')

if [ -n "$FORMATTABLE_FILES" ]; then
  echo "âœ¨ Running Prettier on staged files..."

  # Run Prettier and write changes
  echo "$FORMATTABLE_FILES" | xargs pnpm prettier --write

  # Re-add formatted files to staging
  echo "$FORMATTABLE_FILES" | xargs git add

  echo "âœ… Prettier formatting complete and files re-staged."
else
  echo "ðŸŽ¯ No formatable files staged. Skipping Prettier."
fi

exit 0
